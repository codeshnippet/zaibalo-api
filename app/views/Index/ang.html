#{extends 'main.html'/} 
#{set 'moreScripts'} 
	#{script 'angular.min.js' /}
	#{script 'ang.js' /}
#{/set}
<div ng-app="zaibaloApp">
		<div ng-controller="PostsController as postsCtrl">
			<h2>&{'add.post'}</h2>
			
			<form>
				<textarea id="new-post-text" value="" placeholder="&{'text'}" ng-model="postsCtrl.newPost.content"></textarea>
				<button class="btn" ng-click="postsCtrl.addPost(postsCtrl.posts)">&{'post'}</button>
			</form>
			
			<h2>&{'latest.posts'}</h2>
			<div class="post" ng-hide="postsCtrl.newPost">
				<strong>{{postsCtrl.newPost.author.displayName}}</strong> on {{postsCtrl.newPost.creationTimestamp | date: dd/mm/yyyy}}
				<p>{{postsCtrl.newPost.content}}</p>
			</div>
			<div class="post" ng-repeat="post in postsCtrl.posts">
				<strong>{{post.author.displayName}}</strong> on {{post.creationTimestamp | date: dd/mm/yyyy}}
				<p>{{post.content}}</p>
			</div>
			
			<a href="#" data-bind="click: loadMorePosts">Load more posts</span></a>
		</div>
</div>