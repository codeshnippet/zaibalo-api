#{extends 'main.html'/} 
#{set 'moreScripts'} 
	#{script 'posts.js' /}
#{/set}

<h2>&{'add.post'}</h2>

<form>
	<input id="new-post-text" value="" placeholder="&{'text'}" />
	<button class="btn" data-bind="click: addPost">&{'post'}</button>
</form>

<h2>&{'latest.posts'}</h2>
<div class="posts" data-bind="foreach: posts">
	<div class="post">
		<span data-bind="text: author.displayName"></span>
		
		<input data-bind="value: content, visible: content.isEditing" />
		<span data-bind="text: content, visible: !content.isEditing()" ></span>
		
		<a href="#" data-bind="visible: !content.isEditing(), click: content.beginEdit">Edit</a>
		<a href="#" data-bind="click: content.endEditAndSubmit, visible: content.isEditing">Confirm</a>
		<a href="#" data-bind="click: content.cancelEdit, visible: content.isEditing">Cancel</a>
		
		<a href="#" data-bind="click: $root.deletePost">Delete</a>
	</div>
</div>

<a href="#" data-bind="click: loadPosts">Load more</span></a>