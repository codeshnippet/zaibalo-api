#{extends 'main.html'/} 
#{set 'moreScripts'} 
	#{script 'posts.js' /}
#{/set}

<h2>&{'add.post'}</h2>

<form>
	<textarea id="new-post-text" value="" placeholder="&{'text'}" ></textarea>
	<button class="btn" data-bind="click: addPost">&{'post'}</button>
</form>

<h2>&{'latest.posts'}</h2>
<div class="posts" data-bind="foreach: posts">
	<div class="post">
		<strong data-bind="text: author.displayName" ></strong>
		<ul class="pull-right">
			<li data-bind="visible: !content.isEditing()"><a href="#" data-bind="click: content.beginEdit">Edit post</a></li>
			<li><a href="#" data-bind="click: $root.deletePost">Delete post</a></li>
		</ul>
		<div>
			<textarea data-bind="value: content, visible: content.isEditing"></textarea>
			<p data-bind="text: content, visible: !content.isEditing()" ></p>
		</div>
		<a href="#" data-bind="click: content.endEditAndSubmit, visible: content.isEditing">Confirm</a>
		<a href="#" data-bind="click: content.cancelEdit, visible: content.isEditing">Cancel</a>
	</div>
</div>

<a href="#" data-bind="click: loadMorePosts">Load more posts</span></a>